<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ja" th:replace="~{layout :: layout(~{::content})}">

<body>
	<div th:fragment="content">
		<h2 th:text="${pageTitle}">タスク登録</h2>

		<form th:action="${task.id} != null ? @{'/tasks/' + ${task.id} + '/update'} : @{/tasks}" th:object="${task}"
			method="post" class="form-vertical">

			<label>案件:
				<select name="projectId" required>
					<option value="">選択してください</option>
					<option th:each="p : ${projects}" th:value="${p.id}"
						th:selected="${task.project != null and p.id == task.project.id}" th:text="${p.name}">案件
					</option>
				</select>
			</label>

			<label>タイトル:
				<input type="text" th:field="*{title}" required>
			</label>

			<label>担当者:
				<input type="text" th:field="*{assignee}">
			</label>

			<label>ステータス:
				<select th:field="*{status}">
					<option th:each="s : ${statuses}" th:value="${s}" th:text="${s}">TODO</option>
				</select>
			</label>

			<label>優先度:
				<select th:field="*{priority}">
					<option th:each="p : ${priorities}" th:value="${p}" th:text="${p}">MEDIUM</option>
				</select>
			</label>

			<label>期限:
				<input type="date" th:field="*{dueDate}">
			</label>

			<label>見積工数(h):
				<input type="number" step="0.25" th:field="*{estimatedHours}">
			</label>

			<label>実績工数(h):
				<input type="number" step="0.25" th:field="*{actualHours}">
			</label>

			<label>詳細:
				<textarea th:field="*{description}" rows="3"></textarea>
			</label>

			<div class="form-actions">
				<button type="submit" class="btn">保存</button>
				<a th:href="@{/tasks}" class="btn-secondary">戻る</a>
			</div>
		</form>
	</div>
</body>

</html>